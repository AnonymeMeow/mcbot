## [自动回复](src/main/kotlin/ChatBot.kt)

在群聊中可由关键词触发bot随机回复，目前支持全文匹配关键词和文本中匹配关键词，关键词目前只能是纯文本，回复目前支持<a id = "ReplyType">纯文本，图片，at某人以及QQ原生表情</a>。若存在多个文本中匹配则随机选择一个关键词进行回复。可以通过`/chatbot <on/off>`开启/关闭本群自动回复功能。对关键词和回复的操作如下：

- `/remember [-i] <keyword> [reply...]`:记住指定关键词的回复，其中-i选项表示关键词为文本中匹配，若回复为空，则bot会等待命令发起人的下一消息，若其满足回复[消息类型](#ReplyType)要求则将其放入回复列表，若为转发消息则将其内满足回复[消息类型](#ReplyType)要求的回复全放入回复列表，若前者均不满足则跳过此次命令，直接到完成阶段（Done.）。
- `/forget [-ik] <keyword> [index...]`:忘记某一关键词或指定回复，其中-i选项代表关键词为文本中匹配关键词，-k选项表示忘记该关键词的所有回复。该指令用index来指代回复，因为可能会存在图片等无法用纯文本指代的回复。
- `/lookup [-ikf] <keyword>`:查询关键词或回复，其中-k选项代表查询指定关键词的所有回复，-i代表查询文本中匹配的关键词。回复查询结果“next”，“prev”或页码可以完成翻页。-f在有-k参数的情况下可以以转发消息的形式回复，防止刷屏。
- `/lookup -n number`:将每一页的消息数量设为number，此标签会覆盖ikf标签。

可能存在的问题：部分情况下可能会出现图片下载失败的情况，特别是在文字和图片同时出现时，参考issue:<https://github.com/mamoe/mirai/issues/1073>.